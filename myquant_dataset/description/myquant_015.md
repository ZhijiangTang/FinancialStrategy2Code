# 海龟交易法(期货)

分享

阅读 192903
 更新 2022-05-09 16:56:48

* [海龟交易法](#30c4142fd6f8262d)
  + [1. 原理](#4d68e06c45acd2a2)
    - [1.1 起源](#58896c8f4826f4ef)
    - [1.2 建仓资金](#f464e09082bb0180)
    - [1.3 入市信号](#2c623029a9da9f50)
    - [1.4 加仓和止损](#5e4d162e21ab4eb8)
    - [1.5 止盈](#6645f9b1b74126ed)
  + [2. 策略思路](#cf0127fe1bcb3311)
  + [3. 策略代码](#69a3fc437f0227e3)
  + [4. 回测结果与稳健性分析](#3e2df45effccee1c)

# 海龟交易法

## 1. 原理

### 1.1 起源

海龟交易思想起源于上世纪八十年代的美国。理查德丹尼斯与好友比尔打赌，主题是一个成功的交易员是天生的还是后天的。理查德用十年时间证明了通过日常系统培训，交易员可以通过后天培训成为一名优秀的交易者。这套培训系统就是海龟交易系统。

海龟交易系统是一个完整的、机械的交易思想，可以系统地完成整个交易过程。它包括了买卖什么、头寸规模、何时买卖、何时退出等一系列交易策略，是一个趋势交易策略。它最显著的特点是捕捉中长期趋势，力求在短期内获得最大的收益。

### 1.2 建仓资金

海龟交易法将建仓资金按照一定比例划分为若干个小部分，每次建仓头寸和加仓规模都与波动量N（又称平均真实波动振幅average true range ATR）有关。ATR是日内指数最大波动的平均振幅，由当日最高、最低价和上一交易日的收盘价决定。

***ATR***

![](/uploads/202011/attach_1644dade59a71009.png)  
其中PDC是前一交易日的收盘价，ATR就是TR在N天内的均值。  
  
***价值波动量***  
  
利用N值来体现价值波动量DV：  
**DV = N \* 合约每点价值**

其中每点代表的价值量是指每一个指数点数所代表的价格。  
每一次开仓交易合约数unit的确定是将总资产的1%除以DV得到。

![](/uploads/202011/attach_1644db0e005d0867.png)

### 1.3 入市信号

海龟交易法使用的是以一个理查德唐奇安的通道突破系统为基础的入市系统。唐奇安通道分为系统一和系统二，对应短期突破和中长期突破。其中，短期突破系统是以20日（最高价或最低价）突破为基础，当价格突破20日价格即为入市信号；中长期系统是当盘中价格突破过去55日价格为入市信号。

### 1.4 加仓和止损

海龟交易法的加仓规则是当捕捉到入市信号后建立第一个交易单位的头寸，市价继续向盈利方向突破1/2N时加仓。

止损位为2N,同加仓一样采用平均真实振幅N值为止损单位。每加仓一次，止损位就提高1/2N。

### 1.5 止盈

短期：多头头寸在突破过去10日最低价处止盈离市，空头头寸在突破过去10日最高价处止盈离市。  
中长期：多头头寸在突破过去20日最低价处止盈离市，空头头寸在突破过去20日最高价处止盈离市。

## 2. 策略思路

第一步：获取历史数据，计算唐奇安通道和ATR  
第二步：当突破唐奇安通道时，开仓。  
第三步：计算加仓和止损信号。

回测标的：DCE.i2012  
回测时间：2020-02-15 至 2020-09-01  
回测初始资金：100万

**Tips：**  
ATR值是不断变化的，这就会导致在对期货平仓时，可能出现平仓数量 > 持仓数量的现象。比如前一交易日的持仓为10，今日的ATR值为22.假设当前价格触发平仓条件，平仓1/2*ATR。1/2*ATR=11 > 10, 这样就会导致委托失败报错。所以要加入一个变量volume\_hold用来记录当前持仓量，与1/2\*ATR作比较。

**注意：若修改回测期，需要修改对应的回测标的。**

## 3. 策略代码

```