# 跨品种套利(期货)

分享

阅读 77411
 更新 2022-05-09 16:56:48

* [跨品种套利](#09193f1e386d702e)
  + [1. 原理](#4d68e06c45acd2a2)
  + [2. 策略思路](#cf0127fe1bcb3311)
  + [3. 策略代码](#69a3fc437f0227e3)
  + [4. 回测结果与稳健性分析](#3e2df45effccee1c)

# 跨品种套利

## 1. 原理

**什么是套利？**

套利是指在买入或卖出一种金融资产的同时卖出或买入另一种相关的金融资产从中利用价差获得套利的过程。

**什么是跨品种套利？**

当两个合约有很强的相关性时，可能存在相似的变动关系，两种合约之间的价差会维持在一定的水平上。当市场出现变化时，两种合约之间的价差会偏离均衡水平。此时，可以买入其中一份合约同时卖出其中一份合约，当价差恢复到正常水平时平仓，获取收益。

以大商所玉米和淀粉为例，合约分别为DCE.c1801和DCE.cs1801。二者之间相关性为0.7333，价差处于相对稳定合理区间。如图所示。

![](/uploads/202011/attach_16447dccc6e340a8.png)

二者价差整体处于250-350之间。当价差偏离此区间时，可以进行跨品种套利。

**跨品种套利有以下几个特点：**

1.套利的两种资产必须有一定的相关性。  
2.两种合约标的不同，到期时间相同。  
3.两种资产之间的价差呈现一定规律。

**怎样确定合约之间有相关性？**

最常用的方法是利用EG两步法对两个序列做协整检验，判断两个序列是否平稳。只有单整阶数相同，二者才有可能存在一定的关系。

以大豆和豆粕为例，选取其在2017年1月1日至2018年1月1日的主力合约价格时间序列，利用statsmodels包进行协整检验。

检验结果为：  
焦炭的t = -1.7886，1%置信区间的临界值为-3.4576,说明该序列在99%的置信水平下平稳。  
焦煤的t = -2.0500，1%置信区间的临界值为-3.4576,说明该序列在99%的置信水平下平稳。

因此，二者都为**平稳序列**。

利用OLS回归检残差序列是否平稳，残差的t=-2.3214，临界值为-3.4577，说明残差平稳。因此，可以认为二者之间存在一定关系。

回归后的残差图如下：  
![](/uploads/202011/attach_16447dd8a2012b87.png)

对残差进行ks检验，检验结果p=0,说明残差分布为正态分布。

**策略设计**

传统利用价差进行跨品种套利的方法是计算出均值和方差，设定开仓、平仓和止损阈值。当新的价格达到阈值时，进行相应的开仓和平仓操作。

**应该怎样确定均值？**

均值的选取主要有两种方法，第一种方法是固定均值。先历史价格计算相应的阈值（比如利用2017年2月-2017年6月的数据计算阈值，在2019年7月进行套利），再用最新价差进行比较，会发现前后均值差异很大。如图所示。  
![](/uploads/202011/attach_16447de3754242dd.png)  
因此，常用变动的均值设定阈值。即用过去N天两个标的之间差值的均值和方差。

## 2. 策略思路

第一步：选择相关性较高的两个合约，本例选择大商所的焦炭和焦煤。  
第二步：以过去30个的1d频率bar的均值正负0.75个标准差作为开仓阈值，以正负2个标准差作为止损阈值。  
第三步：最新价差上穿上界时做空价差，回归到均值附近平仓；下穿下界时做多价差，回归到均值附近平仓。设定止损点，触发止损点则全部平仓。

回测期：2018-02-01 8:00:00 至 2018-12-31 16:00:00  
回测标的：DCE.j1901, DCE.jm1901  
回测初始资金：200万  
**注意：若修改回测期，需要修改对应的回测标的。**

## 3. 策略代码

```